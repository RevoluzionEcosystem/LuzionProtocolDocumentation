# RDS - Raffle Distribution System

## <mark style="color:yellow;">LZN Utility In Raffle Distribution System</mark>

The raffle distribution system is based on a smart contract that is deployed on the BSC blockchain network. The smart contract code is publicly available and can be audited by anyone. This ensures that the raffle distribution system is fair and transparent, with no possibility of tampering or manipulation.

{% embed url="https://www.youtube.com/watch?v=JQoKdEafb7A" %}
RDS Tutorial Guide
{% endembed %}

### <mark style="color:yellow;">Quick Guide?</mark>

The process of participating in the RDS pools is straightforward and easy. Here are the steps:

1. Connect your wallet to the Luzion Dapp at [https://luzion.app](https://luzion.app)
2. Set an allowance if this is your first time purchasing tickets. This will allow the RDS Smart Contract to access your LZN tokens for the ticket purchase.
3. Make sure you have enough LZN tokens for the ticket purchase. If you don't have enough, you can purchase LZN tokens directly through the swap window modal.
4. Purchase your tickets.
5. Once you have purchased your tickets, wait for the countdown timer to end. Each RDS pool has a duration of 24 hours.
6. After the countdown timer ends, check if any of your tickets have won. If you have a winning ticket, click on the claim button to enjoy your rewards.

That's it! The process is simple and easy to follow.

### <mark style="color:yellow;">Participation</mark>

To participate in RDS, a user must first purchase a ticket using LZN tokens, users need to ensure before purchasing tickets that they had also approve allowance for the RDS contract for LZN tokens. Once done, users will need to make sure that the lottery is also running with a countdown timer, only then users are able to purchase the tickets.&#x20;

Each ticket are randomly math generated to the users, every time users changes the value of amount of tickets to purchase, the number for the tickets are randomize again. The user can purchase multiple tickets, increasing their chances of winning the prize. Cost per ticket in LZN is always shown in ticket purchase window. In case you're unable to purchase tickets, please check that your wallet has sufficient LZN tokens.&#x20;

If you don't have enough LZN tokens, the buy button will not work. You can also buy LZN tokens instantly by clicking on the 'Buy LZN Token' button, which will open the swap modal window.

### <mark style="color:yellow;">Dynamic Ticket Pricing Model</mark>

One of the unique features of the Luzion Protocol Raffle Distribution System is the use of a dynamic pricing model. The price of each ticket decreases as more tickets are bought by the user with the same wallet and same RDS ID, which encourages participation to purchase more hoping for a better change while cheaper ticket rates and helps to sustain the pool value for the raffle. This also ensures that the prize pool grows as more people participate.

### <mark style="color:yellow;">Distribution Process</mark>

The RDS distribution process begins automatically every single time when the draw number is reveal. The duration of the RDS is at constant of 24 hours with no specific time on start and end, the time depending when the number is automatically drawn which is triggered by either Revoluzion team member or even by anyone else. Once the RDS is created and started, it is automatically added to the Luzion Protocol RDS platform and made available for users to participate in buying the tickets again.

### <mark style="color:yellow;">Winning Match Bracket Percentage</mark>

The RDS distribution is divided into 6 matching numbers, and each match corresponds to a percentage of the total prize pool. For instance, if the total prize pool is valued at 1,000,000 LZN and 10 players won a Match 1 ticket, they would share 1.98% of the total prize pool, which is equivalent to 505,050.50505 LZN. Each player would receive 50,505.05050 LZN per ticket.

* Match 1: **1.98 %**
* Match 2: **3.96 %**
* Match 3: **8.91 %**
* Match 4: 14.85 %
* Match 5: 24.75 %
* Match 6: **44.45 %**
* Blackhole: **1%** of the total LZN from the RDS pool is automatically sent to the Blackhole dEAd address.

The RDS distribution is automated to the users as a tracker, users would however have to claim their tickets to get their rewards. Users are able to always check the previous RDS to go back and claim their unclaimed ticket at any given time at no limit timeframe.

### <mark style="color:yellow;">Winner Selection</mark>

Once the raffle is complete and tickets have been sold, the smart contract automatically selects a winner based on a random number generation algorithm utilizing state of the art randomizer smart contract developed by Revoluzion which utilizes multiple inputs and txn hash to estimate the RNG. Users will then be able to check if any of their tickets are won in the Previous Draw window tab for each of their tickets, users would not require to review every single ticket if they had won, they could briefly review the matching numbers from 1 > 6 and check the ticket if there is a match and click claim.

### <mark style="color:yellow;">Frequently Asked Questions</mark>

<mark style="color:yellow;">**Q: How do I participate in the RDS?**</mark>\
A: To participate in the RDS, you must first purchase a ticket using LZN tokens. You can also buy LZN tokens instantly by clicking on the 'Buy LZN Token' button, which will open the swap modal window.\
\
<mark style="color:yellow;">**Q: How much does a ticket cost?**</mark>\
A: The cost of a ticket is dynamic and depends on the number of tickets you have already purchased. The price of each ticket decreases as more tickets are bought by the user with the same wallet and same RDS ID, which encourages participation to purchase more hoping for a better change while cheaper ticket rates and helps to sustain the pool value for the raffle. This also ensures that the prize pool grows as more people participate.\
\
<mark style="color:yellow;">**Q: How many tickets can I buy?**</mark>\
A: You can buy as many tickets as you want, increasing your chances of winning the prize.\
\
<mark style="color:yellow;">**Q: I tried buying tickets but when i click nothing happens?**</mark>\
A: First will to check if you have approve allowance for the contract for ticket purchasing, this is mostly a one time thing only.\
\
<mark style="color:yellow;">**Q: Ok, i have approve allowance for the contract but still nothing happens?**</mark>\
A: Make sure that you have sufficient LZN tokens in your wallet with the amount of tickets that you are buying.\
\
<mark style="color:yellow;">**Q: Can i sell my tickets after purchase?**</mark>\
A: No, tickets sold are final and directly stored in the contract memory.\
\
<mark style="color:yellow;">**Q: Can i sell my tickets to other people?**</mark>\
A: No, tickets stored in the contract memory and is not a token with transfer ability.\
\
<mark style="color:yellow;">**Q: How do I know if I have won?**</mark>\
A: Once the raffle has ended and winning draw number is revealed, users are able to check their winning tickets under finished RDS section.\
\
<mark style="color:yellow;">**Q: How do I claim my winnings?**</mark>\
A: Once the raffle has ended and winning draw number is revealed, users are able to check their winning tickets under finished RDS section. Users would then be able to claim their winnings by clicking on the claim button.\
\
<mark style="color:yellow;">**Q: Can i claim multiple tickets that have the same match 1 for example?**</mark>\
A: Yes, you can claim multiple tickets that have the same match 1,2 etc, however you would need to claim them one by one.\
\
<mark style="color:yellow;">**Q: What if i forgot to claim my tickets from few previous RDS ID?**</mark>\
A: You can always go back to the previous RDS ID and claim your tickets at any given time.\
\
<mark style="color:yellow;">**Q: Why is the total LZN in the smart contract and pool different in value?**</mark>\
A: This is due to when the contract detect winners, it stores aside the winning amount and only carry forward the balance to the next pool.\
\
<mark style="color:yellow;">**Q: Why is my ticket not showing up after purchase?**</mark>\
A: This is due LZN dapp is currently only utilizing public RPC and it gets congested at times, a simple reload of the page will fix it and show up.\
\
<mark style="color:yellow;">**Q: Why is my winning ticket showing X numbers but i don't see any tickets?**</mark>\
A: This is due LZN dapp is currently only utilizing public RPC and it gets congested at times, a simple reload of the page will fix it and show up.\
\
<mark style="color:yellow;">**Q: I have tried all the above but my tickets are still not showing up?**</mark>\
A: First step would to ensure that your wallet is connected, secondly is to ensure its on the correct network which is Binance Smart Chain. Lastly would be to ensure its the correct wallet connected.\
\
<mark style="color:yellow;">**Q: Why are my claims for Match 1 in value are different at times, it says 1.98% but i get less?**</mark>\
A: This is due to each Match are 1.98% of the total pool value and it is split and distributed to the total of all winners that have winning tickets for Match 1.\
\
<mark style="color:yellow;">**Q: I won multiple tickets that have multiple Match 1 through 6, can i claim all?**</mark>\
A: Yes, you can claim all your winning tickets for any Match, however you would need to claim them one by one.\
\
<mark style="color:yellow;">**Q: I saw the timer countdown has ended but the drawn number for that RDS ID is still not shown?**</mark>\
A: This is due to the reveal final draw number has not been initiated by anyone.\
\
<mark style="color:yellow;">**Q: Can i initiate the final draw number then?**</mark>\
A: Yes you can, anyone can initiate the final draw number reveal by clicking on the reveal button even tho they did not buy any tickets.

<mark style="color:yellow;">**Q: What happens to LZN tokens that are rebasing in the RDS Pool?**</mark>\
A: When LZN tokens are rebasing in the RDS Pool, we remove the additional tokens once they reach a certain threshold. These tokens are then reinjected back into the RDS Pool.

<mark style="color:yellow;">**Q: Can the current RDS token, which is LZN, be removed using the token recovery function in the RDS smart contract?**</mark>\
A: No, it is not possible to remove the current RDS token using the token recovery function in the RDS smart contract. However, we can change the RDS token and remove the LZN tokens by stopping the RDS and starting it again with a new token.

<mark style="color:yellow;">**Q: Is it possible to change the RDS token requirement anytime?**</mark>\
A: No, it is only possible to change the RDS token when the RDS is not running. Once the RDS is running, it is not possible to change the RDS token.

<mark style="color:yellow;">**Q: So, does this mean that the LZN tokens that are rebasing will be injected back into the RDS Pool over time?**</mark>\
A: Yes, that is correct. The LZN tokens that are rebasing will be injected back into the RDS Pool over time, increasing the pool value constantly.

### <mark style="color:yellow;">RDS Smart Contract Logic</mark>

{% code overflow="wrap" lineNumbers="true" %}
```solidity
/* RDS Logic */

 struct Lottery {
        Status status;
        uint256 startTime;
        uint256 endTime;
        uint256 priceTicketInToken;
        uint256 discountDivisor;
        uint256[6] rewardsBreakdown; // 0: 1 matching number // 5: 6 matching numbers
        uint256 treasuryFee; // 500: 5% // 200: 2% // 50: 0.5%
        uint256[6] tokenPerBracket;
        uint256[6] countWinnersPerBracket;
        uint256 firstTicketId;
        uint256 firstTicketIdNextLottery;
        uint256 amountCollectedInToken;
        uint32 finalNumber;
    }
    
//example of call structure during read function for checking RDSID : 

// example call = 
tuple(uint8,uint256,uint256,uint256,uint256,uint256[6],uint256,uint256[6],uint256[6],uint256,uint256,uint256,uint32): 3,1681480972,1681481472,1000000000000000000,300,0,1000,1500,2000,2500,3000,3000,0,0,0,0,0,0,2,0,0,0,0,0,1846,1896,577022224982872302471,1668935

// Structure is based on :
1: struct Lottery {
2: Status status; - wether the RDS status is open or closed
3: uint256 startTime; - start time in epoch
4: uint256 endTime; - end time in epoch
5: uint256 priceTicketInToken; - ticket price including decimals 10 ** 5
6: uint256 discountDivisor; - discount divisor for bulk ticket purchase rate
7: uint256[6] rewardsBreakdown; - rewards breakdown [""] / 10000
8: uint256 treasuryFee; - treasury fee (replaced with dEAd address)
9: uint256[6] tokenPerBracket; - tokens in value per match [1,2,3,4,5,6]
10: uint256[6] countWinnersPerBracket; - total winners per each bracket [1,2,3,4,5,6]
11: uint256 firstTicketId; - the first ticket ID for the RDS ID
12: uint256 firstTicketIdNextLottery; - first ticket ID for the next RDS ID
13: uint256 amountCollectedInToken; - amount collected in LZN including previous RDS injection pool
14: uint32 finalNumber; - Final Draw Number

```
{% endcode %}
